{"ast":null,"code":"let token;\nlet expiration;\nconst clientID = '636dfc0f06d648c1bebf682b8b2a50a5';\nconst redirectURL = 'http://localhost:3000/';\nconst spotify = {\n  getAccesToken() {\n    if (token) return token;\n\n    if (window.location.href.match(/access_token=([^&]*)/) && window.location.href.match(/expires_in=([^&]*)/)) {\n      token = window.location.href.match(/access_token=([^&]*)/);\n      expiration = window.location.href.match(/expires_in=([^&]*)/);\n      window.setTimeout(() => token = '', expiration * 1000);\n      window.history.pushState('Acces Token', null, '/');\n    } else {\n      window.location = `https://accounts.spotify.com/authorize?client_id=${clientID}&response_type=token&scope=playlist-modify-public&redirect_uri=${redirectURL}`;\n    }\n  },\n\n  search(term) {\n    const token = spotify.getAccesToken();\n    return fetch(`https://api.spotify.com/v1/search?type=track&q=${term}, {method: 'GET'}, {headers: {Authorization: Bearer ${token}}}`).then(response => {\n      return response.json();\n    }).then(jsonResponse => {\n      if (!jsonResponse.tracks) {\n        return [];\n      }\n\n      return jsonResponse.tracks.items.map(track => ({\n        id: track.id,\n        name: track.name,\n        artist: track.artist,\n        album: track.album,\n        uri: track.uri\n      }));\n    });\n  }\n\n};\nexport default spotify;","map":{"version":3,"names":["token","expiration","clientID","redirectURL","spotify","getAccesToken","window","location","href","match","setTimeout","history","pushState","search","term","fetch","then","response","json","jsonResponse","tracks","items","map","track","id","name","artist","album","uri"],"sources":["/home/sucolova/Documents/projects/jamming/src/util/Spotify.js"],"sourcesContent":["let token;\nlet expiration;\nconst clientID = '636dfc0f06d648c1bebf682b8b2a50a5';\nconst redirectURL = 'http://localhost:3000/';\n\nconst spotify = {\n  getAccesToken() {\n    if (token) return token;\n    if (window.location.href.match(/access_token=([^&]*)/) && window.location.href.match(/expires_in=([^&]*)/)) {\n      token = window.location.href.match(/access_token=([^&]*)/);\n      expiration = window.location.href.match(/expires_in=([^&]*)/);\n      window.setTimeout(() => token = '', expiration * 1000);\n      window.history.pushState('Acces Token', null, '/');\n    } else {\n      window.location = `https://accounts.spotify.com/authorize?client_id=${clientID}&response_type=token&scope=playlist-modify-public&redirect_uri=${redirectURL}`;\n    }\n  },\n\n  search(term) {\n    const token = spotify.getAccesToken();\n    return fetch(\n      `https://api.spotify.com/v1/search?type=track&q=${term}, {method: 'GET'}, {headers: {Authorization: Bearer ${token}}}`\n    ).then(response => {\n      return response.json();\n    }).then(jsonResponse => {\n      if (!jsonResponse.tracks) {\n        return [];\n      }\n      return jsonResponse.tracks.items.map(track => ({\n        id: track.id,\n        name: track.name,\n        artist: track.artist,\n        album: track.album,\n        uri: track.uri\n      }));\n    })\n\n  }\n};\n\n\nexport default spotify;\n"],"mappings":"AAAA,IAAIA,KAAJ;AACA,IAAIC,UAAJ;AACA,MAAMC,QAAQ,GAAG,kCAAjB;AACA,MAAMC,WAAW,GAAG,wBAApB;AAEA,MAAMC,OAAO,GAAG;EACdC,aAAa,GAAG;IACd,IAAIL,KAAJ,EAAW,OAAOA,KAAP;;IACX,IAAIM,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,sBAA3B,KAAsDH,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,oBAA3B,CAA1D,EAA4G;MAC1GT,KAAK,GAAGM,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,sBAA3B,CAAR;MACAR,UAAU,GAAGK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,oBAA3B,CAAb;MACAH,MAAM,CAACI,UAAP,CAAkB,MAAMV,KAAK,GAAG,EAAhC,EAAoCC,UAAU,GAAG,IAAjD;MACAK,MAAM,CAACK,OAAP,CAAeC,SAAf,CAAyB,aAAzB,EAAwC,IAAxC,EAA8C,GAA9C;IACD,CALD,MAKO;MACLN,MAAM,CAACC,QAAP,GAAmB,oDAAmDL,QAAS,kEAAiEC,WAAY,EAA5J;IACD;EACF,CAXa;;EAadU,MAAM,CAACC,IAAD,EAAO;IACX,MAAMd,KAAK,GAAGI,OAAO,CAACC,aAAR,EAAd;IACA,OAAOU,KAAK,CACT,kDAAiDD,IAAK,uDAAsDd,KAAM,IADzG,CAAL,CAELgB,IAFK,CAEAC,QAAQ,IAAI;MACjB,OAAOA,QAAQ,CAACC,IAAT,EAAP;IACD,CAJM,EAIJF,IAJI,CAICG,YAAY,IAAI;MACtB,IAAI,CAACA,YAAY,CAACC,MAAlB,EAA0B;QACxB,OAAO,EAAP;MACD;;MACD,OAAOD,YAAY,CAACC,MAAb,CAAoBC,KAApB,CAA0BC,GAA1B,CAA8BC,KAAK,KAAK;QAC7CC,EAAE,EAAED,KAAK,CAACC,EADmC;QAE7CC,IAAI,EAAEF,KAAK,CAACE,IAFiC;QAG7CC,MAAM,EAAEH,KAAK,CAACG,MAH+B;QAI7CC,KAAK,EAAEJ,KAAK,CAACI,KAJgC;QAK7CC,GAAG,EAAEL,KAAK,CAACK;MALkC,CAAL,CAAnC,CAAP;IAOD,CAfM,CAAP;EAiBD;;AAhCa,CAAhB;AAoCA,eAAexB,OAAf"},"metadata":{},"sourceType":"module"}